---
layout: default
---
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<div class="home">
  {%- if page.title -%}
  <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  <!-- {% for p in site.pages %}
  {{ p.path }}
  {% endfor %} -->
  
 

  <ul class="tags">
    {% for tag in site.tags %}
      {% assign t = tag | first %}
      {% assign posts = tag | last %}
      <li>{{t | downcase | replace:" ","-" }} has {{ posts | size }} posts</li>
    {% endfor %}
    </ul>
    
  

  <div id="all-iframes">

  </div>
 
</div>

<script>
  window.onload = function () { 
  console.log("loaded");
    var sitelist = [];
    var reflist = [];
    {% assign path_to_l = "" | split: "," %} //todo: add to this Liquid array instead. 
    {% for p in site.pages %}
    var path_to = "{{p.path}}";
    
    if(path_to.trim().includes(".md") && path_to.trim().includes("ontology")){
      if(path_to.trim().includes("outline")){

      } else{
        {% assign pp = p.path %}
        var p_md_name = "{{pp}}";
        p_md_name = p_md_name.split(".")[0];
        // console.log("{{pp}}");
        // sitelist.push("{{pp}}");
        sitelist.push(p_md_name);
        reflist.push(p_md_name.split("/")[1]);
      }       
    }      
    {% endfor %}
    console.log("got sitelist: " + sitelist);
    
  // {% for ont in site.ontology %}
  //   <p>{{ont.title}}</p>
  // {% endfor %}
    // programatically add iframes: 
    var num_ids = sitelist.length;
    var f = "";
    for (let i = 0; i < num_ids; i++) {
      console.log("adding i: " + i);
      //todo: support any number of iframes
      // var h = i;
      // var j = i + 1;
      //outline:
      f = "switch-to-full" + i;
      $("<div />", { "class": "wrapper", id: "outline" + i })
        .append($("<iframe src='" + sitelist[i] + "_outline.html' width='1000' height='250' frameborder='0' scrolling='no'></iframe>", { type: "iframe", id: "outline-frame" + i }))
        .append($("<button id='" + f + "' type='button' class='btn btn-primary'>View full</button>"))
        .on("click", "button", function(){
          // console.log("clicked " + i);
          $("#full-details" + i).show();
          $("#outline" + i).hide();
        })
        .appendTo("#all-iframes");
      //full:
      f = "switch-to-outline" + i;
      $("<div />", { "class": "wrapper", id: "full-details" + i })
        .append($("<iframe src='" + sitelist[i] + ".html' width='1000' height='500' frameborder='0' scrolling='no'></iframe>", { type: "iframe", id: "full-frame" + i }))
        .append($("<button id='" + f + "' type='button' class='btn btn-primary'>View outline</button>"))
        .on("click", "button", function(){
          // console.log("clicked " + i);
          $("#full-details" + i).hide();
          $("#outline" + i).show();
        })
        .appendTo("#all-iframes");
      
      //outline:
      // var f = "switch-to-full" + j;
      // $("<div />", { "class": "wrapper", id: "outline" + j })
      //   .append($("<iframe src='/ontology/mfoem_outline.html' width='1000' height='250' frameborder='0' scrolling='no'></iframe>", { type: "iframe", id: "outline-frame" + j }))
      //   .append($("<button id='" + f + "' type='button' class='btn btn-primary'>View full</button>"))
      //   .on("click", "button", function(){
      //     $("#full-details" + j).show();
      //     $("#outline" + j).hide();
      //   })
      //   .appendTo("#all-iframes");
      // //full:
      // var f = "switch-to-outline" + j;
      // $("<div />", { "class": "wrapper", id: "full-details" + j })
      //   .append($("<iframe src='/ontology/mfoem.html' width='1000' height='500' frameborder='0' scrolling='no'></iframe>", { type: "iframe", id: "full-frame" + j }))
      //   .append($("<button id='" + f + "' type='button' class='btn btn-primary'>View outline</button>"))
      //   .on("click", "button", function(){
      //     $("#full-details" + j).hide();
      //     $("#outline" + j).show();
      //   })
      //   .appendTo("#all-iframes");
    }

    //initilise view - works:
    for (var i = 0; i < num_ids; i++) {
      $("#full-details" + i).hide();
      $("outline" + i).show();
    }
   
    
  }

</script>